const o=`{% block swag_paypal_disputes_detail %} <sw-page class="swag-paypal-disputes-detail"> {% block swag_paypal_disputes_detail_smart_bar_header %} <template #smart-bar-header> {% block swag_paypal_disputes_detail_smart_bar_header_title %} <h2> {% block swag_paypal_disputes_detail_smart_bar_header_title %} {{ $t('swag-paypal-disputes.detail.title') }} {% endblock %} {% block swag_paypal_disputes_detail_smart_bar_header_dispute_id %} {{ disputeId }} {% endblock %} {% block swag_paypal_disputes_detail_smart_bar_header_title_addition %} {{ $t('swag-paypal-disputes.detail.titleAddition') }} {% endblock %} </h2> {% endblock %} </template> {% endblock %} {% block swag_paypal_disputes_detail_content %} <template #content> <sw-card-view> {% block swag_paypal_disputes_detail_content_details %} <mt-card position-identifier="swag-paypal-disputes-detail-content-details" :isLoading="isLoading" :title="$t('swag-paypal-disputes.detail.mainFieldsCardTitle')" > {% block swag_paypal_disputes_detail_content_details_fields %} <template v-if="dispute"> {% block swag_paypal_disputes_detail_content_details_fields_external_link %} <div class="swag-paypal-disputes-detail__links"> <sw-external-link :href="externalDetailPageLink"> {{ $t('swag-paypal-disputes.detail.externalLinkText') }} </sw-external-link> </div> {% endblock %} {% block swag_paypal_disputes_detail_content_details_fields_order_module_link %} <div class="swag-paypal-disputes-detail__links"> <router-link v-if="orderModuleLink" :to="orderModuleLink" target="_blank" rel="noopener" > {{ $t('swag-paypal-disputes.detail.orderModuleLinkText') }} </router-link> </div> {% endblock %} {% block swag_paypal_disputes_detail_content_details_fields_separator %} <hr class="swag-paypal-disputes-detail__separator"> {% endblock %} {% block swag_paypal_disputes_detail_content_details_fields_id %} <mt-text-field :modelValue="dispute.dispute_id" :label="$t('swag-paypal-disputes.common.dispute_id')" disabled /> {% endblock %} {% block swag_paypal_disputes_detail_content_details_fields_update_time %} <mt-text-field :modelValue="formatDate(dispute.update_time)" :label="$t('swag-paypal-disputes.common.update_time')" disabled /> {% endblock %} {% block swag_paypal_disputes_detail_content_details_fields_due_date %} <mt-text-field v-if="dispute.seller_response_due_date || dispute.buyer_response_due_date" :modelValue="getDueDate(dispute.seller_response_due_date, dispute.buyer_response_due_date)" :label="$t('swag-paypal-disputes.common.response_due_date.label')" disabled /> {% endblock %} {% block swag_paypal_disputes_detail_content_details_fields_status %} <mt-text-field :modelValue="\`\${formatTechnicalText(dispute.status)} (\${formatTechnicalText(dispute.reason)})\`" :label="$t('swag-paypal-disputes.common.status')" disabled /> {% endblock %} {% block swag_paypal_disputes_detail_content_details_fields_dispute_life_cycle_stage %} <mt-text-field :modelValue="formatTechnicalText(dispute.dispute_life_cycle_stage)" :label="$t('swag-paypal-disputes.common.dispute_life_cycle_stage')" :class="getInquiryClass(dispute.dispute_life_cycle_stage)" disabled /> {% endblock %} {% block swag_paypal_disputes_detail_content_details_fields_dispute_amount %} <mt-text-field :modelValue="\`\${dispute.dispute_amount.value} \${dispute.dispute_amount.currency_code}\`" :label="$t('swag-paypal-disputes.common.dispute_amount')" disabled /> {% endblock %} </template> {% endblock %} </mt-card> {% endblock %} {% block swag_paypal_disputes_detail_content_raw_data %} <mt-card position-identifier="swag-paypal-disputes-detail-content-raw-data" :isLoading="isLoading" :title="$t('swag-paypal-disputes.detail.rawDataCardTitle')" > {% block swag_paypal_disputes_detail_content_raw_data_content %} <template v-if="dispute"> {% block swag_paypal_disputes_detail_content_raw_data_text %} <mt-textarea :modelValue="JSON.stringify(dispute, null, 2)" disabled /> {% endblock %} {% block swag_paypal_disputes_detail_content_raw_data_copy_button %} <mt-button variant="secondary" @click="copyToClipboard"> {{ $t('swag-paypal-disputes.detail.copyButtonLabel') }} </mt-button> {% endblock %} </template> {% endblock %} </mt-card> {% endblock %} </sw-card-view> </template> {% endblock %} </sw-page> {% endblock %}`,{Filter:r,Utils:n}=Shopware,{Criteria:p}=Shopware.Data,{capitalizeString:_}=Shopware.Utils.string,u=Shopware.Component.wrapComponentConfig({template:o,inject:["SwagPayPalDisputeApiService","systemConfigApiService","repositoryFactory"],mixins:[Shopware.Mixin.getByName("swag-paypal-notification")],props:{disputeId:{type:String,required:!0},salesChannelId:{type:String,required:!1,default:null}},data(){return{isLoading:!1,dispute:null,resolutionCenterUrl:"https://www.paypal.com/resolutioncenter",orderModuleLink:null}},computed:{orderTransactionRepository(){return this.repositoryFactory.create("order_transaction")},orderTransactionCriteria(){var i,s,l,d;const e=(l=(s=(i=this.dispute)==null?void 0:i.disputed_transactions)==null?void 0:s[0])==null?void 0:l.custom;if(!e)return null;const t=((d=JSON.parse(e))==null?void 0:d.orderTransactionId)??e;if(typeof t!="string"||t.length!==32)return null;const a=new p(1,1);return a.setIds([t]),a},externalDetailPageLink(){var e;return`${this.resolutionCenterUrl}/${((e=this.dispute)==null?void 0:e.dispute_id)??""}`},dateFilter(){return r.getByName("date")}},created(){this.createdComponent()},methods:{async createdComponent(){this.isLoading=!0,(await this.systemConfigApiService.getValues("SwagPayPal.settings"))["SwagPayPal.settings.sandbox"]&&(this.resolutionCenterUrl="https://www.sandbox.paypal.com/resolutioncenter"),this.getDetail()},getDetail(){this.SwagPayPalDisputeApiService.detail(this.disputeId,this.salesChannelId).then(e=>{this.dispute=e,this.setLinkToOrderModule(),this.isLoading=!1}).catch(this.handleError.bind(this))},handleError(e){this.createNotificationError({title:this.$t("swag-paypal-disputes.list.errorTitle"),message:this.createMessageFromError(e)}),this.isLoading=!1},async setLinkToOrderModule(){this.orderTransactionCriteria||(this.orderModuleLink=null);const t=(await this.orderTransactionRepository.search(this.orderTransactionCriteria))[0];t!==null&&(this.orderModuleLink={name:"sw.order.detail.general",params:{id:t.orderId}})},formatTechnicalText(e){return _(e).replace(/_/g," ")},getInquiryClass(e){return e==="INQUIRY"?"swag-paypal-disputes-detail__stage-inquiry":"swag-paypal-disputes-detail__stage-other"},getDueDate(e,t){return e!==null?`${this.$t("swag-paypal-disputes.common.response_due_date.seller")}: ${this.formatDate(e)}`:t!==null?`${this.$t("swag-paypal-disputes.common.response_due_date.buyer")}: ${this.formatDate(t)}`:""},copyToClipboard(){if(this.dispute!==null)try{n.dom.copyStringToClipboard(JSON.stringify(this.dispute)),this.createNotificationInfo({message:this.$t("global.sw-field.notification.notificationCopySuccessMessage")})}catch{this.createNotificationError({message:this.$t("global.sw-field.notification.notificationCopyFailureMessage")})}},formatDate(e){return this.dateFilter(e,{hour:"2-digit",minute:"2-digit",second:"2-digit"})}}});export{u as default};
